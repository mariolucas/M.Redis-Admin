<div class="modal-header">
    <h6 class="modal-title" id="modal-basic-title"> <strong>Chave:</strong> {{appService.keyInfo.key}} </h6>
  </div>
<div class="modal-body">

	<div class="btn-group">
		<button (click)="openModalNewValue(appService.keyInfo)" *ngIf="appService.keyInfo.type != 'String'" type="button" class="mb-3 btn btn-primary btn-sm" >
			<fa-icon icon="file"></fa-icon> 
			{{appService.keyInfo.type == 'Hash' ? 'Nova hash' :''}}
			{{appService.keyInfo.type == 'List' ? 'Novo item' :''}}
			{{appService.keyInfo.type == 'Set' ? 'Novo valor':''}}
			{{appService.keyInfo.type == 'zSet' ? 'Novo membro':''}}
		</button>

		<button (click)="openModalTime(appService.keyInfo)" type="button" class="mb-3 btn btn-primary btn-sm" >
			<fa-icon icon="clock"></fa-icon> 
			Alterar expiração
		</button>
	</div>

	

	<ngb-tabset>
	  <ngb-tab title="Tabela">
	    <ng-template ngbTabContent>

			<!-- LIST -->

			<div class="mt-3" *ngIf="appService.keyInfo.type == 'List' ">
				<table class="table table-borderless table-hover table-sm">
				  <thead>
				    <tr>
				      <th scope="col">Indice</th>
				      <th scope="col">Valor</th>
				      <th scope="col" class="center" width="100">Editar</th>
				      <th scope="col" class="center" width="100">Excluir</th>
				    </tr>
				  </thead>
				  <tbody>
				    <tr *ngFor="let item of appService.keyInfo.value; let i = index ">
				      <td>{{i}}</td>
				      <td>{{item}}</td>
				      <td class="center click" (click)="open( appService.keyInfo, {'value':item, 'index':i} )"><fa-icon icon="pencil-alt"></fa-icon></td>
				      <td class="center click" (click)="openModalDeleteValue(appService.keyInfo.type, appService.keyInfo.key, item)" ><fa-icon icon="trash-alt"></fa-icon></td>
				    </tr>
				  </tbody>
				</table>
			</div>

			<!-- HASH -->

			<div  class="mt-3" *ngIf="appService.keyInfo.type == 'Hash' ">
				<table class="table table-borderless table-hover table-sm">
				  <thead>
				    <tr>
				      <th scope="col" >Hash</th>
				      <th scope="col" >Valor</th>
				      <th scope="col" class="center" width="100">Editar</th>
				      <th scope="col" class="center" width="100">Excluir</th>
				    </tr>
				  </thead>
				  <tbody>
				    <tr *ngFor="let item of appService.keyInfo.value | keyvalue">
				      <td>{{item.key}}</td>
				      <td>{{item.value}} </td>
				      <td class="center click" (click)="open( appService.keyInfo, item )"><fa-icon icon="pencil-alt"></fa-icon></td>
				      <td class="center click" (click)="openModalDeleteValue(appService.keyInfo.type, appService.keyInfo.key, item.key)"><fa-icon icon="trash-alt"></fa-icon></td>
				    </tr>
				  </tbody>
				</table>
			</div>

			<!-- SET -->

			<div  class="mt-3" *ngIf="appService.keyInfo.type == 'Set' ">
				<table class="table table-borderless table-hover table-sm">
				  <thead>
				    <tr>
				      <th scope="col" >Valor</th>
				      <th scope="col" class="center" width="100">Editar</th>
				      <th scope="col" class="center" width="100">Excluir</th>
				    </tr>
				  </thead>
				  <tbody>
				    <tr *ngFor="let item of appService.keyInfo.value | keyvalue">
				      <td> {{item.value}} </td>
				      <td class="center click" (click)="open( appService.keyInfo, item )"><fa-icon icon="pencil-alt"></fa-icon></td>
				      <td class="center click" (click)="openModalDeleteValue(appService.keyInfo.type, appService.keyInfo.key, item.value)"><fa-icon icon="trash-alt"></fa-icon></td>
				    </tr>
				  </tbody>
				</table>
			</div>

			<!-- ZSET -->

			<div  class="mt-3" *ngIf="appService.keyInfo.type == 'zSet' ">
				<table class="table table-borderless table-hover table-sm">
				  <thead>
				    <tr>
				      <th scope="col" width="100" >Score</th>
				      <th scope="col" >Valor</th>
				      <th scope="col" class="center" width="100">Editar</th>
				      <th scope="col" class="center" width="100">Excluir</th>
				    </tr>
				  </thead>
				  <tbody>
				    <tr *ngFor="let item of appService.keyInfo.value | keyvalue">
				      <td>{{item.value}}</td>
				      <td>{{item.key}} </td>
				      <td class="center click" (click)="open( appService.keyInfo, item )"><fa-icon icon="pencil-alt"></fa-icon></td>
				      <td class="center click" (click)="openModalDeleteValue(appService.keyInfo.type, appService.keyInfo.key, item.key)"><fa-icon icon="trash-alt"></fa-icon></td>
				    </tr>
				  </tbody>
				</table>
			</div>

			<!-- String -->

			<div  class="mt-3" *ngIf="appService.keyInfo.type == 'String' ">
				<table class="table table-borderless table-hover table-sm">
				  <thead>
				    <tr>
				      <th scope="col" >Valor</th>
				      <th scope="col" class="center" width="100">Editar</th>
				    </tr>
				  </thead>
				  <tbody>
				    <tr>
				      <td>{{appService.keyInfo.value}}</td>
				      <td class="center click" (click)="open( appService.keyInfo )"><fa-icon icon="pencil-alt"></fa-icon></td>
				    </tr>
				  </tbody>
				</table>
			</div>

	    </ng-template>
	  </ngb-tab>
	  <ngb-tab title="JSON" *ngIf="appService.keyInfo.type != 'String' ">
	    <ng-template ngbTabContent>
	      
	      <div class="mt-3">
	      	<code>{{appService.keyInfo.value | json}}</code>      	
	      </div>

	    </ng-template>
	  </ngb-tab>
	</ngb-tabset>


</div>
<div class="modal-footer">
	Tipo: <code> {{appService.keyInfo.type}}</code>
    ·
    Expira em:
    <code>{{appService.keyInfo.ttl}} <span class="small">s</span></code>
</div>